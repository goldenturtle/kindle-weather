<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="utf-8">
    <title>Smart Dashboard</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0;
            background-color: white; color: black;
            width: 758px; height: 1024px;
            overflow: hidden;
            font-family: "Noto Sans Devanagari", "Lohit Devanagari", sans-serif;
            display: flex; flex-direction: column;
        }

        /* --- HEADER --- */
        .header {
            height: 70px; background: black; color: white;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 25px;
        }
        .header-date { font-size: 26px; font-weight: 900; }
        .header-tithi { font-size: 20px; font-weight: 700; color: #ddd; }

        /* --- MAIN CONTENT SPLIT --- */
        .main-stage {
            flex-grow: 1; display: flex; flex-direction: column;
        }

        /* SECTION A: DYNAMIC INK ART (Top Half) */
        .ink-art-container {
            height: 480px; /* Large canvas for art */
            position: relative;
            border-bottom: 4px solid black;
            overflow: hidden;
            display: flex; align-items: flex-end; justify-content: space-between;
            padding: 20px;
        }
        
        /* The SVG Art sits in the background */
        .art-svg {
            position: absolute; top: 20px; right: 20px;
            width: 300px; height: 300px; opacity: 0.8;
            z-index: 0;
        }

        /* Weather Info Overlaid on Art */
        .weather-overlay { z-index: 2; position: relative; width: 100%; }
        .big-temp { font-size: 160px; font-weight: 900; line-height: 0.9; letter-spacing: -6px; }
        .big-cond { font-size: 48px; font-weight: 900; margin-top: 10px; }
        .summary-line { font-size: 24px; font-weight: 700; opacity: 0.7; margin-top: 5px; }
        .astro-row { font-size: 22px; margin-top: 20px; font-weight: 700; display: flex; gap: 20px; }

        /* SECTION B: BRIEFING DECK (Bottom Half) */
        .briefing-deck {
            flex-grow: 1;
            display: flex;
            padding: 20px;
            gap: 20px;
        }

        /* Left Column: Calendar & Quote */
        .deck-left { width: 35%; display: flex; flex-direction: column; gap: 20px; }
        
        .calendar-box {
            border: 3px solid black; border-radius: 12px; padding: 15px;
            text-align: center;
        }
        .cal-month { font-size: 20px; font-weight: 900; border-bottom: 2px solid black; margin-bottom: 5px; text-transform: uppercase;}
        .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; font-size: 14px; font-weight: 700; }
        .cal-day { padding: 4px 0; }
        .cal-today { background: black; color: white; border-radius: 4px; }

        .quote-box {
            border: 3px solid black; border-radius: 12px; padding: 15px;
            flex-grow: 1; display: flex; flex-direction: column; justify-content: center;
            text-align: center;
        }
        .quote-text { font-size: 22px; font-style: italic; font-weight: 700; line-height: 1.3; }
        .quote-author { font-size: 16px; margin-top: 10px; font-weight: 900; text-transform: uppercase; }

        /* Right Column: News Feed */
        .deck-right { 
            width: 65%; 
            border: 3px solid black; border-radius: 12px; 
            padding: 15px;
        }
        .news-title { font-size: 22px; font-weight: 900; text-transform: uppercase; border-bottom: 2px solid black; padding-bottom: 10px; margin-bottom: 10px; }
        .news-item { 
            font-size: 20px; font-weight: 700; 
            margin-bottom: 15px; line-height: 1.3; 
            border-bottom: 1px solid #ccc; padding-bottom: 10px;
        }
        .news-item:last-child { border: none; }

        /* FOOTER */
        .footer-strip {
            background: black; color: white;
            text-align: center; font-size: 14px; padding: 5px;
        }

    </style>
</head>
<body>

    <div class="header">
        <div class="header-date" id="date">--</div>
        <div class="header-tithi" id="tithi">--</div>
    </div>

    <div class="main-stage">
        
        <div class="ink-art-container">
            <div class="weather-overlay">
                <div class="big-temp" id="temp">--¬∞</div>
                <div class="big-cond" id="cond">--</div>
                <div class="summary-line" id="summary">--</div>
                <div class="astro-row">
                    <span id="sun">‚òÄÔ∏è --</span> <span id="moon">üåô --</span>
                </div>
            </div>
            <div id="artCanvas" class="art-svg"></div>
        </div>

        <div class="briefing-deck">
            
            <div class="deck-left">
                <div class="calendar-box">
                    <div class="cal-month" id="calMonth">--</div>
                    <div class="cal-grid" id="calGrid"></div>
                </div>
                <div class="quote-box">
                    <div class="quote-text" id="quoteText">"..."</div>
                    <div class="quote-author" id="quoteAuthor">--</div>
                </div>
            </div>

            <div class="deck-right">
                <div class="news-title">üì∞ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞</div>
                <div id="newsList">
                    </div>
            </div>

        </div>
    </div>

    <div class="footer-strip" id="updated">Updated: --</div>

    <script>
        // === ART ASSETS (Simple SVG Paths) ===
        const ARTS = {
            sun: `<svg viewBox="0 0 100 100" fill="none" stroke="black" stroke-width="4"><circle cx="50" cy="50" r="20"/><path d="M50 10v15M50 75v15M10 50h15M75 50h15M22 22l10 10M68 68l10 10M22 78l10-10M68 32l10-10"/></svg>`,
            cloud: `<svg viewBox="0 0 100 100" fill="none" stroke="black" stroke-width="4"><path d="M25 60a15 15 0 0 1 0-30 18 18 0 0 1 35 0 12 12 0 0 1 0 24H25z"/></svg>`,
            rain: `<svg viewBox="0 0 100 100" fill="none" stroke="black" stroke-width="4"><path d="M25 50a15 15 0 0 1 0-30 18 18 0 0 1 35 0 12 12 0 0 1 0 24H25z"/><path d="M35 60l-5 15M50 60l-5 15M65 60l-5 15"/></svg>`,
            moon: `<svg viewBox="0 0 100 100" fill="none" stroke="black" stroke-width="4"><path d="M70 20 A 30 30 0 1 1 40 80 A 25 25 0 0 0 70 20 z"/></svg>`
        };

        // === HELPERS ===
        const DAYS_HI = ["‡§∞‡§µ‡§ø", "‡§∏‡•ã‡§Æ", "‡§Æ‡§Ç‡§ó‡§≤", "‡§¨‡•Å‡§ß", "‡§ó‡•Å‡§∞‡•Å", "‡§∂‡•Å‡§ï‡•ç‡§∞", "‡§∂‡§®‡§ø"];
        const MONTHS_HI = ["‡§ú‡§®‡§µ‡§∞‡•Ä", "‡§´‡§∞‡§µ‡§∞‡•Ä", "‡§Æ‡§æ‡§∞‡•ç‡§ö", "‡§Ö‡§™‡•ç‡§∞‡•à‡§≤", "‡§Æ‡§à", "‡§ú‡•Ç‡§®", "‡§ú‡•Å‡§≤‡§æ‡§à", "‡§Ö‡§ó‡§∏‡•ç‡§§", "‡§∏‡§ø‡§§‡§Ç‡§¨‡§∞", "‡§Ö‡§ï‡•ç‡§ü‡•Ç‡§¨‡§∞", "‡§®‡§µ‡§Ç‡§¨‡§∞", "‡§¶‡§ø‡§∏‡§Ç‡§¨‡§∞"];
        const WEATHER_MAP = { "Sunny": "‡§ñ‡§ø‡§≤‡•Ä ‡§ß‡•Ç‡§™", "Clear": "‡§∏‡§æ‡§´‡§º", "Partly cloudy": "‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§¨‡§æ‡§¶‡§≤", "Cloudy": "‡§¨‡§æ‡§¶‡§≤", "Overcast": "‡§ò‡§®‡•á ‡§¨‡§æ‡§¶‡§≤", "Mist": "‡§ï‡•ã‡§π‡§∞‡§æ", "Rain": "‡§¨‡§æ‡§∞‡§ø‡§∂", "Drizzle": "‡§¨‡•Ç‡§Ç‡§¶‡§æ‡§¨‡§æ‡§Ç‡§¶‡•Ä", "Thunder": "‡§§‡•Ç‡§´‡§æ‡§®", "Smoke": "‡§ß‡•Å‡§Ü‡§Ç" };

        function translate(text) {
            for (let k in WEATHER_MAP) { if (text.includes(k)) return WEATHER_MAP[k]; }
            return text;
        }

        // Tithi Calc (Simplified)
        function getTithi(date) {
            const knownNewMoon = new Date('2000-01-06T18:14:00Z');
            const diff = (date - knownNewMoon) / (1000 * 60 * 60 * 24);
            const age = diff % 29.53;
            const idx = Math.floor((age / 29.53) * 30) + 1;
            const paksha = idx <= 15 ? "‡§∂‡•Å‡§ï‡•ç‡§≤" : "‡§ï‡•É‡§∑‡•ç‡§£";
            return `${idx <= 15 ? 'üåï' : 'üåë'} ${paksha} ‡§™‡§ï‡•ç‡§∑`;
        }

        // Calendar Render
        function renderCalendar(date) {
            const month = date.getMonth();
            const year = date.getFullYear();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = date.getDate();

            document.getElementById("calMonth").innerText = MONTHS_HI[month];
            
            let html = "";
            // Headers
            ["S","M","T","W","T","F","S"].forEach(d => html += `<div>${d}</div>`);
            // Blanks
            for(let i=0; i<firstDay; i++) html += `<div></div>`;
            // Days
            for(let i=1; i<=daysInMonth; i++) {
                const cls = i === today ? "cal-day cal-today" : "cal-day";
                html += `<div class="${cls}">${i}</div>`;
            }
            document.getElementById("calGrid").innerHTML = html;
        }

        // Main Render
        function render(data) {
            const w = data.weather;
            const cur = w.current;
            const today = w.forecast.forecastday[0];
            const now = new Date(w.location.localtime);

            // 1. Header
            document.getElementById("date").innerText = `${DAYS_HI[now.getDay()]}, ${now.getDate()} ${MONTHS_HI[now.getMonth()]}`;
            document.getElementById("tithi").innerText = getTithi(now);

            // 2. Ink Art Weather
            document.getElementById("temp").innerText = Math.round(cur.temp_c) + "¬∞";
            const condText = translate(cur.condition.text);
            document.getElementById("cond").innerText = condText;
            document.getElementById("summary").innerText = `‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ${Math.round(today.day.maxtemp_c)}¬∞ ‚Ä¢ ‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ${Math.round(today.day.mintemp_c)}¬∞ ‚Ä¢ ‡§¨‡§æ‡§∞‡§ø‡§∂ ${today.day.daily_chance_of_rain}%`;
            document.getElementById("sun").innerText = `‚òÄÔ∏è ${today.astro.sunrise}`;
            document.getElementById("moon").innerText = `üåô ${today.astro.moon_phase}`;

            // Select Art
            let art = ARTS.sun;
            const textLower = cur.condition.text.toLowerCase();
            const isNight = cur.is_day === 0;

            if (textLower.includes("rain") || textLower.includes("drizzle")) art = ARTS.rain;
            else if (textLower.includes("cloud") || textLower.includes("overcast") || textLower.includes("mist")) art = ARTS.cloud;
            else if (isNight) art = ARTS.moon;

            document.getElementById("artCanvas").innerHTML = art;

            // 3. Calendar
            renderCalendar(now);

            // 4. Quote
            if(data.quote) {
                document.getElementById("quoteText").innerText = `"${data.quote.content}"`;
                document.getElementById("quoteAuthor").innerText = `- ${data.quote.author}`;
            }

            // 5. News
            if(data.news && data.news.length > 0) {
                let html = "";
                data.news.forEach(n => {
                    // Cleanup Google News titles (remove source name at end)
                    const cleanTitle = n.split(" - ")[0];
                    html += `<div class="news-item">${cleanTitle}</div>`;
                });
                document.getElementById("newsList").innerHTML = html;
            }

            document.getElementById("updated").innerText = "Last Update: " + w.location.localtime.split(" ")[1];
        }

        document.addEventListener("DOMContentLoaded", () => {
            if (window.injectedData) render(window.injectedData);
        });
    </script>
</body>
</html>
